<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://fonts.googleapis.com/css?family=Cormorant+SC|Berkshire+Swash|Righteous|Montserrat|Indie+Flower|Spectral+SC&display=swap" rel="stylesheet">
    <html lang="en"></html>
    <title>Tarot Randomizer</title>
</head>
    <style>
        html {
            overflow:scroll;
            /* scroll-behavior: smooth; */
            font-family: 'Berkshire Swash', cursive;
            overscroll-behavior: none;
            background-image: url('https://static.parade.com/wp-content/uploads/2019/02/tarot-cards-FTR.jpg');
            background-attachment: fixed;
            background-position: center;
            background-repeat: no-repeat;
            background-size: cover;
        }
        body {
            display: flex;
            max-width: 100%;
            overflow-x: hidden;
            flex-direction: column;
            margin:0;
            background-color:rgba(0,0,0,0.87);
        }
        .screen {
            padding-top:5vh;
            display: inline-flex;
            height:101vh;
        }
        .content {
            margin:8vh auto;
        }
        .circles {
            animation: spin1 80s infinite linear;
            -webkit-animation: spin1 80s infinite linear;
        }
        #left-img {
            float:left;
            margin-left:-30px;
            margin-top:4vh;
            margin-bottom:1vh;
            width:500px;
            min-width:500px;
            height:auto;
            min-height:400px;
            opacity:0.6;
            animation-name: dissolve;
            animation-duration: 12000ms;
            animation-fill-mode: forwards;          
        }
     @keyframes dissolve{
            0%{
                opacity: 0;
            }
            50%{
                opacity: 0.5;
            }
            100%{
                opacity: 1;
            }
    }
        #right-img {
            float:right;
            height:85%;
            width: auto;
            margin-top: -40vh;
            margin-right:-15vw;
            margin-left:-7vw;
            opacity:0.7;
            -webkit-filter:  drop-shadow(2px 2px 5px rgb(157, 158, 223));
            filter: drop-shadow(2px 2px 6px rgb(89, 89, 231));
            animation: spin1 150s infinite linear;
            -webkit-animation: spin1 150s infinite linear;
        }
        #central-circle {
            background-image: url("https://images-wixmp-ed30a86b8c4ca887773594c2.wixmp.com/i/27ea359f-4142-4716-af8a-6308370f0c7e/d7sx9r5-e4fb9a86-a923-4701-b8bd-215588cbe508.png/v1/fill/w_894,h_894,strp/full_blue_moon__png_by_annamae22_d7sx9r5-pre.png");
            /* background-color: transparent; */
            opacity:0.6;
            background-repeat: no-repeat;
            background-position: center;
            box-shadow:-5px 2px 68px 22px rgba(255,213,0,0.3);
            border-radius: 50%;
            width: 70vh;
            height: 70vh; 
            margin:0 auto;
            background-position: center;
        }

        @keyframes spin1 {
            0% {
            -moz-transform:rotate(320deg);
            -webkit-transform:rotate(320deg);
            -o-transform:rotate(320deg);
            -ms-transform:rotate(320deg);
            }
        100% {
            -moz-transform:rotate(680deg);
            -webkit-transform:rotate(680deg);
            -o-transform:rotate(680deg);
            -ms-transform:rotate(680deg); 
            }
        }
        @-webkit-keyframes spin1 {
        0% {
            -moz-transform:rotate(320deg);
            -webkit-transform:rotate(320deg);
            -o-transform:rotate(320deg);
            -ms-transform:rotate(320deg);
        }
        100% {
            -moz-transform:rotate(680deg);
            -webkit-transform:rotate(680deg);
            -o-transform:rotate(680deg);
            -ms-transform:rotate(680deg); 
        }
        }
        #sigil {
            width: 82vh;
            margin:0;
            /* opacity:1; */
            border: 1px;
        }
        .content > h1{
            vertical-align:middle;
            text-align:center;
            margin:-55%;
            color: rgb(229, 243, 191);
            /* opacity:0.75; */
            text-shadow: 4px 2px rgba(255,213,0,0.75);
            position:relative;
            font-size:6vh;
            /* font-family: 'Cormorant SC', serif; */
        }
        #list-of-students {
            display:flex;
            flex-wrap:wrap;
            width: 30em;
            height:90%;
            /* margin-left:20vw; */
            margin-right:10vw;
            }
        .student, .student-button {
            color: white;
            border : 2px solid white;
            width:12vw;
            height:3vh;
            line-height:3vh;
            min-width:120px;
            margin-left:10px;
            margin-bottom: 7px;
            padding:10px 13px;
            font-size: 18pt;
            border-radius: 2em;
            text-align: center;
            background-color:rgba(0,0,0,0.3);
        }

        .student > p {
            float:left;
            margin-top: 0;
            margin-left:5%;
        }
        .row {
            padding: 1vh;
            text-align: center;
            font-size:4.7vh;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            margin-bottom: 10px;
            /* font-family: 'Roboto', sans-serif; */
        }
        #number-of-groups {
            padding-top: 10%;
            color:white;
        }
        #future-groups {
            color: rgb(229, 243, 191);;
            text-shadow: 3px 3px 4px #000000;
        }
        h1 {
            font-family: 'Cormorant SC', sans-serif;
        }
        button {
            outline: none;
            height: 7vw;
            width: 7vw;
            border-radius:50%;
            margin-right: 1vh;
            font-size:4vh;
            font-family: 'Cormorant SC', sans-serif;
            background: rgba(0,0,0,0);
            color: white;
        }
        button:hover {
            color:darkgrey;
            background-color:rgba(255,213,0,0.2);
        }
        button:active {
            background-color:rgb(124, 106, 124);
        }
        .card {
            float:left;
            height:45vh;
            width:15vw;
            margin:15px;
            font-size:20pt;
            background-image:url('https://t4.ftcdn.net/jpg/01/90/40/37/240_F_190403786_ejqEearcjeTAb0gBajklH4R3UN6eDG6i.jpg');
            background-attachment: fixed;
            /* background-size: 20vw 30vh; */
        }
        .close {
            height: 1.5em;
            width:1.5em;
            float: right;
            font-size:10pt;
            text-align:right;
            background: rgba(0,0,0,0);
            border:none;
            color: rgb(255, 255, 255);
            border-radius: 3px;
            position: relative;
            z-index: 3;
        }
        .enter{
            border-radius: initial;
            position: absolute;
            margin-left: 150px;
            margin-top: 320px;
            z-index: 1000;
            width: 250px;
            height: 70px;
            border-color: rgba(255, 217, 1, 0.767);
            font-size: 25px;
            border-radius: 10px;
            border-style: double;
            border-width: 10px;


        }
    </style>
    <body>
            
        <div class="screen">
                
            <img id="left-img" src="https://png2.kisspng.com/sh/dd63382f97877ba30ce012473307400b/L0KzQYm3V8EyN6p2R91yc4Pzfri0lPhmNaNqedZybnewf7e0iPFvbKQyiNN1bXn2hMPCTfF0fKN0hNHweT3necfwjvF1cZCyiNN1bT31dbLrif5oNWZnTKgDY0K8RIPpVvMzNmgAT6IEOEO8QYa6UcM2OGE6T6QCM0OxgLBu/kisspng-the-reading-of-hands-palmistry-astrology-divinatio-palm-reading-5b468c2942b6c2.7970983915313500572733.png"></img>
            <div class="content">
                <div class="circles" id="central-circle">
                    <img id="sigil" src="https://vignette.wikia.nocookie.net/parapedia/images/2/25/Occult_diagram.gif/revision/latest?cb=20120209165756'"></img>
                </div>
                <h1 class = "title">know your future groups</h1>
                <button class = "enter" onclick="scrollWin()">&#x1f441;</button>
            </div>
            
            <img id="right-img" class="circles" src="https://i.ya-webdesign.com/images/occult-drawing-2.gif"></img>
        </div>
        <div class="screen">
                <button id="add" class="student-button" style="height:5.7vh;" onclick="add_student()">add</button>
        <div id="list-of-students">
                <div class="student"><button onclick="delete_student(event)" class="close">x</button><p>Jeff</p></div>
                <div class="student"><button onclick="delete_student(event)" class="close">x</button><p>Hayes</p></div>
                <div class="student"><button onclick="delete_student(event)" class="close">x</button><p>Kyle</p></div>
                <div class="student"><button onclick="delete_student(event)" class="close">x</button><p>Dasha</p></div>
                <div class="student"><button onclick="delete_student(event)" class="close">x</button><p>Clarke</p></div>
                <div class="student"><button onclick="delete_student(event)" class="close">x</button><p>Stan</p> </div>
                <div class="student"><button onclick="delete_student(event)" class="close">x</button><p>Scott</p></div>
                <div class="student"><button onclick="delete_student(event)" class="close">x</button><p>Lilith</p></div>
                <div class="student"><button onclick="delete_student(event)" class="close">x</button><p>TJ</p>    </div>
                <div class="student"><button onclick="delete_student(event)" class="close">x</button><p>Taylor</p></div>
                <div class="student"><button onclick="delete_student(event)" class="close">x</button><p>Myles</p> </div>
                <div class="student"><button onclick="delete_student(event)" class="close">x</button><p>Kat</p>   </div>
                <div class="student"><button onclick="delete_student(event)" class="close">x</button><p>Hank</p>  </div>
                <div class="student"><button onclick="delete_student(event)" class="close">x</button><p>Chris</p>  </div>
        </div>
        <div id="number-of-groups">
            <div class="row">
                <p style="color:white;border:1px;">How many groups?</p>
            </div>
            <div class="row">
                <button href="#future-groups" onclick="arrange_cards(2)">2</button>
                <button onclick="arrange_cards(3)">3</button>
                <button onclick="arrange_cards(4)">4</button>
            </div>
            <div class="row">
                <button onclick="arrange_cards(5)">5</button>
                <button onclick="arrange_cards(6)">6</button>
            </div>
            <div class="row">
                <button onclick="arrange_cards(7)">7</button>
            </div>
        </div>
    </div>
    <div id="future-groups" class="content">
    </div>
    <!-- <div class="screen"></div> -->
    </body>
    <script>

        var c = 1;
        
        function scrollWin() {
        var interval = setInterval(function() {
        window.scrollBy(0, 20);
        c++
        if (c > 40){
            clearInterval(interval);
            c = 0;
        }
        }, 40);

        }

        function delete_student(eventvar){
            console.log("In delete student function")
            console.log(eventvar.target);
            console.log(eventvar.target.parentNode);
            eventvar.target.parentNode.parentNode.removeChild(eventvar.target.parentNode);
        }
        var counter = 1000;
        function add_student(){
            var person = prompt("Please enter a name", "Name");
            //creates the new student div
            var newStudent = document.createElement('div');
            newStudent.className = 'student';
            newStudent.id = counter;

            var list = document.getElementById('list-of-students');
            list.appendChild(newStudent);
            
            var name = document.createElement('p');
            name.textContent = person;
            

            //I was quite sure this would add a button!!
            var newButton = document.createElement('button');
            newButton.className = "close";
            newButton.innerHTML = "x";
            newButton.onclick = function(){delete_student(event)};
            var student = document.getElementById(counter);
            student.appendChild(newButton);
            student.appendChild(name);
            counter = counter + 1;
        }
        
        var groupCounter = 0;
        function arrange_cards(divisions){
            scrollWin();
            groupCounter = 0;
            // var count = document.getElementById('list-of-students').childElementCount;
            var students = document.querySelectorAll(".student > p"),
                names = [];
            for (var i = 0; i < students.length; i++) {
                names.push(students[i].textContent);
            }
            console.log(names)

            //this loop shuffles the array
            for (var x = 0; x < names.length - 1; x++) {
                console.log("i'm here")
                var j = Math.floor((Math.random() * names.length));
                console.log(j)
                var temp = names[x];
                console.log(temp)
                names[x] = names[j];
                names[j] = temp;
            }
            console.log(names)

            //defining the number of students in groups
            if (divisions <= names.length / 2)
            {
                var peopleInShortGroup = Math.floor(names.length / divisions);
                var peopleInLongGroup = peopleInShortGroup + 1;
                console.log(peopleInShortGroup)
                console.log(peopleInLongGroup)
                var longGroups = names.length % divisions;
                var shortGroups = divisions - longGroups;
                var groupNumberAndIndex = [1,0];
                var list = document.getElementById('future-groups');
                while (list.firstChild) {
                    list.removeChild(list.firstChild);
                }

                printGroups(names, groupNumberAndIndex, longGroups, peopleInLongGroup);
                printGroups(names, groupNumberAndIndex, shortGroups, peopleInShortGroup);
                // window.scrollTo(0,document.body.scrollHeight);
            }
            else
            {
                var str = "Sorry, that's too many groups for this session." +
                	"\nSome people will have to work alone." +
                    "\nChoose a different number.";
                var list = document.getElementById('number-of-groups');
                var message = document.createElement('h1');
                message.id = "message";
                message.innerHTML = str;
                list.appendChild(message);  
                
            }
        }

        function printGroups(items, groupNumberAndIndex, numberOfGroups, peopleInGroup) {
            while (numberOfGroups > 0)
            {
                console.log("Group", groupNumberAndIndex[0])
                var newRow = document.createElement('section');
                newRow.className = 'row';
                newRow.id = groupCounter;

                var list = document.getElementById('future-groups');
                list.appendChild(newRow);
                var header = document.createElement('h1');
                var str = groupCounter + 1;
                header.innerHTML = "group " + str;
                newRow.appendChild(header);
                for (var i = groupNumberAndIndex[1]; i < groupNumberAndIndex[1] + peopleInGroup; ++i)
                {
                    console.log(items[i] + " ")
                    var tarotCard = document.createElement('div');
                    tarotCard.className = "card";
                    tarotCard.innerHTML = items[i];
                    var row = document.getElementById(groupCounter);
                    row.appendChild(tarotCard);
                    var img = document.createElement('img');
                    img.src = 'https://images-na.ssl-images-amazon.com/images/I/81GFQKXw7WL.jpg';
                    img.setAttribute('width', '100%')
                    img.setAttribute('height', '92%')
                    tarotCard.appendChild(img);
                    // newButton.onclick = function(){delete_student(event)};
                    // var student = document.getElementById(counter);
                }
                groupNumberAndIndex[1] += peopleInGroup;
                ++groupNumberAndIndex[0];
                ++groupCounter;
                --numberOfGroups;
                // scrollWin();
            }
            return groupNumberAndIndex;
        }
    </script>
</html>